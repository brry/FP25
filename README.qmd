---
title: "Fundamentals of Programming 2025"
author: "Berry Boessenkool;"
date: now
date-format: %Y-%m-%d, %H:%M
format:
    gfm: 
       embed-resources: false
---

This is a github task in the course [FP25](https://open.hpi.de/courses/hpi-dh-fprog2025).\

## Get weather data

```{r, packages}
if(!requireNamespace("rdwd", quietly=TRUE))
	install.packages("rdwd")
rdwd::updateRdwd()
```

download recent weather data using [rdwd](https://bookdown.org/brry/rdwd/)

```{r, get_weather_data}
#| message: false
library(rdwd)
link <- selectDWD("Potsdam", res="daily", var="kl", per="recent")
clim <- dataDWD(link, varnames=TRUE, force=24)
```

## visualise recent temperature

```{r, plot_clim}
plotDWD(clim, "TMK.Lufttemperatur")
```

## transfer to Python

I use Python via the R package reticulate. All chill on Windows; On Mac, I needed a manual install:
```{r, install_python, eval=FALSE}
install.packages("reticulate")
# check first:
reticulate::py_config()
reticulate::py_available(TRUE)
# potentially do the edit_r_environ below if you have a working Python path

# install Python if needed
reticulate::install_miniconda() # then do the tos thing in the terminal, then:
reticulate::install_miniconda(force=TRUE)
reticulate::use_miniconda(condaenv="r-reticulate", required=TRUE)
reticulate::py_config()
# Make Python choice permanent (normally happens automatically in the background):
usethis::edit_r_environ() # RETICULATE_PYTHON=~/Library/r-miniconda/envs/r-reticulate/bin/python

# Restart Rstudio, check if calling python works:
reticulate::py_available()
reticulate::py_eval("1+1")
reticulate::py_numpy_available(TRUE)
reticulate::py_numpy_available()

reticulate::py_install(c("numpy", "pandas", "matplotlib"))
```

Back to the actual code:
```{python, histograms, results="hide"}
clim_py = r.clim
import matplotlib
print(f"Dataset shape: {clim_py.shape[0]} rows, {clim_py.shape[1]} columns")
clim_py = clim_py.select_dtypes(include=['float64', 'int64'])
clim_py.hist(figsize=(12, 8), bins=20)
```

